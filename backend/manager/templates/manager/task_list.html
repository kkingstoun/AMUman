{% extends "manager/base.html" %}

{% block title %}Tasks list{% endblock %}
{% block name %}Tasks list{% endblock %}
{% block content %}
<div class="container table-responsive">
    <table class="table table-striped table-dark table-bordered table-fit table-hover table-sm">
        <thead class="thead-dark align-middle">
            <tr>
                <th>ID</th>
                <th>User</th>
                <th>Path</th>
                <th>Node Name</th>
                <th>Port</th>
                <th>Submit Time</th>
                <th>Start Time</th>
                <th>End Time</th>
                <th>Error Time</th>
                <th>Priority</th>
                <th>Status</th>
                <th>Estimated simulation time</th>
                <th>Assigned node</th>
                <th>Assigned gpu</th>
                <th></th>
                <th></th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for task in tasks %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ task.user }}</td>
                <td>{{ task.path }}</td>
                <td>{{ task.node_name }}</td>
                <td>{{ task.port }}</td>
                <td>{{ task.submit_time }}</td>
                <td>{{ task.start_time }}</td>
                <td>{{ task.end_time }}</td>
                <td>{{ task.error_time }}</td>
                <td>{{ task.priority }}</td>
                <td>{{ task.status }}</td>
                <td>{{ task.est }}</td>
                <td>{{task.assigned_node}}
                <td>{{task.assigned_gpu}}
                <td>
                    <a href="{% url 'delete_task' task.id %}" class="btn btn-danger btn-sm">Remove</a>
                </td>
                <td>
                    <a href="{% url 'edit_task' task.id %}" class="btn btn-info btn-sm">Edit</a>
                </td>
                <td>
                    <a href="{% url 'task_action' task.id 'run' %}" class="btn btn-success btn-sm">Run</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<div class="row">
    <div class="col-lg-12">
        <p class="page-title lead">
            Active tasks
        </p>
    </div>
</div>

<div class="row">
    <div class="col-lg-12">
        <div class="container table-responsive">
            <table class="table table-striped table-dark table-bordered table-fit table-hover table-sm">
                <thead class="thead-dark">
                    <tr>
                        <th>ID</th>
                        <th>Path</th>
                        <th>Node Name</th>
                        <th>Port</th>
                        <th>Submit Time</th>
                        <th>Start Time</th>
                        <th>End Time</th>
                        <th>Error Time</th>
                        <th>Priority</th>
                        <th>Status</th>
                        <th>Estimated simulation time</th>
                        <th>Assigned node</th>
                        <th>Assigned gpu</th>
                        <th></th>
                        <th></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    {% for task in active_tasks %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ task.path }}</td>
                        <td>{{ task.node_name }}</td>
                        <td>{{ task.port }}</td>
                        <td>{{ task.submit_time }}</td>
                        <td>{{ task.start_time }}</td>
                        <td>{{ task.end_time }}</td>
                        <td>{{ task.error_time }}</td>
                        <td>{{ task.priority }}</td>
                        <td>{{ task.status }}</td>
                        <td>{{ task.est }}</td>
                        <td>{{task.assigned_node}}
                        <td>{{task.assigned_gpu}}
                            <td>
                                <a href="{% url 'delete_task' task.id %}" class="btn btn-danger btn-sm">Remove</a>
                            </td>
                            <td>
                                <a href="{% url 'task_action' task.id 'cancel' %}" class="btn btn-danger btn-sm">Cancel</a>
                            </td>
                            <td>
                                <a href="{% url 'task_action' task.id 'redo' %}" class="btn btn-success btn-sm">Redo</a>
                            </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
