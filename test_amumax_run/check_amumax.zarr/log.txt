// Amumax v.2023.12.14 a fork of mumax 3.10 [linux_amd64 go1.20.1(gc) CUDA-11.0]
// GPU info: NVIDIA GeForce RTX 4070 Ti(12281MB), CUDA Driver 12.3, cc=8.9, using cc=52 PTX
// output directory: /home/kkingstoun/scripts/git/amuman/test_amumax_run/check_amumax.zarr/// starting GUI at http://localhost:35367
Nx = 256
Ny = 256
Nz = 10
dx = 1e-9
dy = 1e-9
dz = 1e-9
PBCx = 32
PBcy = 32
PBCz = 0
EnableDemag = false
Aex = 10e-12
AnisU = vector(0, 0, 1)
Ku2 = 1e6
Msat = 1000e3
m = uniform(1, 0, 0.1)
tableadd(E_total)
tableautosave(1e-12)
E0 := E_total.get()
alpha = 1
run(1e-9)
E1 := E_total.get()
Delta1 := E1 - E0
print("DeltaE, damped:", Delta1)
// DeltaE, damped: -6.552957553920002e-16
m = uniform(1, 0, 0.1)
E0 = E_total.get()
alpha = 0
run(1e-9)
E1 = E_total.get()
Delta2 := E1 - E0
print("DeltaE, undamped:", Delta2)
// DeltaE, undamped: -3.480000000081621e-25
ratio := abs(Delta2 / Delta1)
print("ratio:", ratio)
// ratio: 5.31057918725549e-10
expect("Relative energy non-conservation:", ratio, 0, 1e-6)
// Relative energy non-conservation: : 5.31057918725549e-10 OK
// **************** Simulation Ended ****************** //
